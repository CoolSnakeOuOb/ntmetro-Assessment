<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€ƒæ ¸ç³»çµ±</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="top-bar">
        <h5><a href="homepage.html">æ–°åŒ—æ·é‹å…¬å¸è€ƒæ ¸ç³»çµ±</a></h5>
        <button type="button" class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
        <div>
            <span id="username" class="text-white me-3"></span>
            <button id="logout-btn" class="btn btn-danger">ç™»å‡º</button>
        </div>
    </div>
    <div class="main-container">
        <div id="sidebar"></div>

        <div id="content">
            <div id="supervisor-view" style="display: none;">
                <div class="frame mb-4">
                    <h4>ä¸Šå‚³</h4>
                    <hr>
                    <div class="row align-items-center">
                        <div class="col-md-6">
                            <input type="file" class="form-control" id="excelFile" accept=".xls,.xlsx">
                        </div>
                        <div class="col-md-6 text-end">
                            <button class="btn btn-primary" type="button" id="uploadBtn">ä¸Šå‚³ä¸¦æ›´æ–°åå–®</button>
                        </div>
                    </div>
                    <div id="upload-status" class="mt-2 small text-muted"></div>
                </div>
                 <div class="frame">
                    <h4>å¾…è©•æ ¸åŒä»åˆ—è¡¨</h4>
                    <hr>
                    <table id="appraisalTable" class="display" style="width:100%"></table>
                </div>
            </div>
            <div id="employee-view" style="display: none;">
                <form id="trialPeriodForm">
                    <div class="frame">
                        <div class="frame-header">
                            <span class="header-icon">ğŸ“‹</span>
                            <span class="header-title" style="font-size: 20px;">è‡ªè©•è¡¨åŸºæœ¬è³‡æ–™</span>
                        </div>
                        <div class="frame-body">
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="hostingbusiness" class="form-label">ä¸»è¾¦æ¥­å‹™:</label><input type="text" class="form-control" id="hostingbusiness"></div>
                                <div class="col-md-6"><label for="major" class="form-label">å°ˆæ¥­:</label><input type="text" class="form-control" id="major"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="dayfrom" class="form-label">è©¦ç”¨æœŸé–“ï¼ˆèµ·ï¼‰:</label><input type="date" class="form-control" id="dayfrom"></div>
                                <div class="col-md-6"><label for="dayto" class="form-label">è©¦ç”¨æœŸé–“ï¼ˆæ­¢ï¼‰:</label><input type="date" class="form-control" id="dayto"></div>
                            </div>
                        </div>
                    </div>
                    <div class="frame">
                        <div class="frame-header">
                            <span class="header-icon">ğŸ“‹</span>
                            <span class="header-title" style="font-size: 20px;">è‡ªæˆ‘è©•åƒ¹</span>
                        </div>
                        <div class="frame-body">
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="se_1" class="form-label">1. å°è©¦ç”¨æœŸé–“åœ¨å…¬å¸çš„è¡¨ç¾æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_1"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                                <div class="col-md-6"><label for="se_2" class="form-label">2. å°èˆ‡åŒäº‹èˆ‡ä¸»ç®¡é–“é—œä¿‚æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_2"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="se_3" class="form-label">3. å°ç›®å‰çš„å·¥ä½œç’°å¢ƒæ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_3"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                                <div class="col-md-6"><label for="se_4" class="form-label">4. å°ç›®å‰çš„å·¥ä½œæ™‚é–“æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_4"><option value="1">å¤ªé•·</option><option value="2">ç¨é•·</option><option value="3">å‰›å¥½</option><option value="4">ä¸æ¸…æ¥š</option></select></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="se_5" class="form-label">5. å°ç›®å‰çš„å¾…é‡æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_5"><option value="1">å¾ˆå¥½</option><option value="2">åˆé©</option><option value="3">ç¨å°‘</option><option value="4">å¤ªå°‘</option></select></div>
                                <div class="col-md-6"><label for="se_6" class="form-label">6. å°ç›®å‰çš„å·¥ä½œæ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_6"><option value="1">å°šèƒ½æ“”ç•¶æ›´å›°é›£å·¥ä½œ</option><option value="2">åˆé©ï¼Œä½†å¸Œæœ›æ“”ä»»æ›´å›°é›£å·¥ä½œ</option><option value="3">æ­£é©åˆç›®å‰æœ¬èº«èƒ½åŠ›</option><option value="4">èƒ½åŠ›ç¨æ„Ÿä¸è¶³</option></select></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="se_7" class="form-label">7. å°ç›®å‰çš„å·¥ä½œé‡æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_7"><option value="1">å¤ªå¤š</option><option value="2">ç¨å¾®å¤š</option><option value="3">é©ä¸­</option></select></div>
                                <div class="col-md-6"><label for="se_8" class="form-label">8. å°ç›®å‰å–®ä½å·¥ä½œåˆ†é…æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_8"><option value="1">åˆç†</option><option value="2">æ‡‰åšé©ç•¶èª¿æ•´</option><option value="3">ä¸åˆç†</option></select></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-12"><label for="se_9" class="form-label">9. å°æ‚¨æ‰€å¾æ“”ä»»è·å‹™å¸Œæœ›ï¼š</label><select class="form-select" id="se_9"><option value="1">ç¹¼çºŒæ“”ä»»ç¾è·</option><option value="2">å¦‚èƒ½èª¿æ•´è‡³åŒå–®ä½____è·å‹™ï¼Œç†ç”±ï¼š________</option><option value="3">å¦‚å¯è®Šæ›´è‡³____å–®ä½____è·å‹™ï¼Œç†ç”±ï¼š________</option></select><input type="text" id="position_change" class="form-control mt-2" placeholder="è«‹å¡«å¯«ï¼šèª¿æ•´è‡³åŒå–®ä½____è·å‹™ï¼Œç†ç”±ï¼š________" style="display: none;"><input type="text" id="unit_change" class="form-control mt-2" placeholder="è«‹å¡«å¯«ï¼šè®Šæ›´è‡³____å–®ä½____è·å‹™ï¼Œç†ç”±ï¼š________" style="display: none;"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-12"><label for="se_10" class="form-label">10. æ–¼è©¦ç”¨æœŸé–“æ›¾ç¶“è¾¦ç†é‡é»ã€é‡å¤§ã€è¼ƒé‡è¦ä¹‹å·¥ä½œäº‹è¹Ÿï¼š</label><input type="text" class="form-control" id="se_10"></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="se_10_1" class="form-label">(1) å°æ–¼è©²å·¥ä½œè¦æ±‚ç›®æ¨™é”æˆåº¦æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_10_1"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                                <div class="col-md-6"><label for="se_10_2" class="form-label">(2) å°æ–¼è©²å·¥ä½œå®‰æ’åŠé€²åº¦æŒæ§æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_10_2"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="se_10_3" class="form-label">(3) å°æ–¼è©²å·¥ä½œè‡ªä¸»åˆ¤æ–·åŠåŸ·è¡Œæ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_10_3"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                                <div class="col-md-6"><label for="se_10_4" class="form-label">(4) å°æ–¼è©²å·¥ä½œåˆ†ææ€è€ƒå‘¨å»¶æ€§æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_10_4"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4"><label for="se_10_5" class="form-label">(5) å°æ–¼è©²å·¥ä½œå•é¡Œç•Œå®šåŠæ±ºç­–æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_10_5"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                                <div class="col-md-4"><label for="se_10_6" class="form-label">(6) å°æ–¼è©²å·¥ä½œå‰µæ–°åŠå°ˆæ¥­é‹ç”¨æ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_10_6"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                                <div class="col-md-4"><label for="se_10_7" class="form-label">(7) å°æ–¼è©²å·¥ä½œåŸ·è¡Œèˆ‡å®Œæˆå“è³ªæ„Ÿåˆ°ï¼š</label><select class="form-select" id="se_10_7"><option value="1">éå¸¸æ»¿æ„</option><option value="2">æ»¿æ„</option><option value="3">å°šå¯</option><option value="4">ä¸æ»¿æ„</option></select></div>
                            </div>
                        </div>
                    </div>
                    <div class="frame">
                        <div class="frame-header">
                            <span class="header-icon">ğŸ“‹</span>
                            <span class="header-title" style="font-size: 20px;">å»ºè­°äº‹é …</span>
                        </div>
                        <div class="frame-body">
                            <div class="row mb-3">
                                <div class="col-md-6"><label for="suggestion_director" class="form-label">è©¦ç”¨æœŸé–“å°ä¸»ç®¡é ˜å°ç›£ç£ä¹‹å»ºè­°ï¼š</label><input type="text" class="form-control" id="suggestion_director"></div>
                                <div class="col-md-6"><label for="suggestion_else" class="form-label">å…¶ä»–å»ºè­°äº‹é …ï¼š</label><input type="text" class="form-control" id="suggestion_else"></div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3 mb-3">
                        <button type="button" class="btn btn-primary w-100 fs-4" id="sybmitform" style="background-color: #2d5986;">ğŸ“¤ é€å‡º</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="share.js"></script>
    
<script>
    $(document).ready(function() {
        const loggedInUser = JSON.parse(sessionStorage.getItem('loggedInUser'));

        if (!loggedInUser) {
            window.location.href = 'index.html';
            return;
        }

        $('#username').text(`æ­¡è¿, ${loggedInUser.name}`);

        if (loggedInUser.role === 'supervisor') {
            $('#supervisor-view').show();
            renderSupervisorSidebar();
            initializeSupervisorTable();

            $('#uploadBtn').on('click', function() {
                const file = $('#excelFile')[0].files[0];
                if (!file) {
                    $('#upload-status').text('è«‹å…ˆé¸æ“‡ä¸€å€‹æª”æ¡ˆï¼').removeClass('text-success').addClass('text-danger');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = new Uint8Array(e.target.result);
                        const workbook = XLSX.read(data, { type: 'array' });
                        const sheetName = workbook.SheetNames[0];
                        const worksheet = workbook.Sheets[sheetName];

                        const jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });

                        if (!jsonData || jsonData.length < 2) {
                            $('#upload-status').text('æª”æ¡ˆå…§å®¹ä¸æ­£ç¢ºï¼Œè«‹æª¢æŸ¥æ¨™é ­æˆ–è³‡æ–™æ˜¯å¦ç‚ºç©ºï¼').removeClass('text-success').addClass('text-danger');
                            return;
                        }

                        const headers = jsonData[0];
                        const dataRows = jsonData.slice(1);
                        
                        const employeeNumIndex = headers.indexOf('å“¡å·¥å·¥è™Ÿ');
                        const chineseNameIndex = headers.indexOf('ä¸­æ–‡å§“å');
                        const departmentIndex = headers.indexOf('éƒ¨é–€åç¨±');
                        const hireDateIndex = headers.indexOf('åˆ°è·æ—¥æœŸ');
                        const jobTitleIndex = headers.indexOf('è·å‹™åç¨±');
                        const leaveStartIndex = headers.indexOf('ç•™è·åœè–ªæ—¥');
                        const leaveEndIndex = headers.indexOf('ç•™åœå¾©è·æ—¥');

                        if (employeeNumIndex === -1 || chineseNameIndex === -1 || departmentIndex === -1 || hireDateIndex === -1 || jobTitleIndex === -1 || leaveStartIndex === -1 || leaveEndIndex === -1) {
                            $('#upload-status').text('æª”æ¡ˆæ¨™é ­ä¸æ­£ç¢ºï¼Œæ‰¾ä¸åˆ°æ‰€éœ€çš„æ¬„ä½ï¼').removeClass('text-success').addClass('text-danger');
                            return;
                        }

                        const endOfYear = new Date(Date.UTC(2024, 11, 31));
                        const startOfYear = new Date(Date.UTC(2024, 0, 1));

                        const processedData = dataRows.map(row => {
                            if (!row[employeeNumIndex]) {
                                return null;
                            }

                            let hireDateValue = row[hireDateIndex];
                            let formattedHireDate = '';
                            let appraisalType = 'ä¸äºˆè€ƒæ ¸';

                            let hireDate = null;
                            if (typeof hireDateValue === 'number') {
                                const excelDate = new Date(Date.UTC(1899, 11, 30));
                                excelDate.setDate(excelDate.getDate() + hireDateValue);
                                hireDate = excelDate;
                                formattedHireDate = hireDate.getFullYear() + '/' + (hireDate.getMonth() + 1).toString().padStart(2, '0') + '/' + hireDate.getDate().toString().padStart(2, '0');
                            } else if (typeof hireDateValue === 'string') {
                                const parts = hireDateValue.split('/');
                                if (parts.length === 3) {
                                    hireDate = new Date(Date.UTC(parseInt(parts[0], 10), parseInt(parts[1], 10) - 1, parseInt(parts[2], 10)));
                                    formattedHireDate = hireDateValue;
                                } else {
                                    formattedHireDate = hireDateValue;
                                }
                            }
                            
                            let leaveStartValue = row[leaveStartIndex];
                            let leaveEndValue = row[leaveEndIndex];
                            let leaveStartDate = null;
                            let leaveEndDate = null;

                            if (typeof leaveStartValue === 'number' && leaveStartValue) {
                                const excelDate = new Date(Date.UTC(1899, 11, 30));
                                excelDate.setDate(excelDate.getDate() + leaveStartValue);
                                leaveStartDate = excelDate;
                            } else if (typeof leaveStartValue === 'string' && leaveStartValue) {
                                const parts = leaveStartValue.split('/');
                                if (parts.length === 3) {
                                    leaveStartDate = new Date(Date.UTC(parseInt(parts[0], 10), parseInt(parts[1], 10) - 1, parseInt(parts[2], 10)));
                                }
                            }

                            if (typeof leaveEndValue === 'number' && leaveEndValue) {
                                const excelDate = new Date(Date.UTC(1899, 11, 30));
                                excelDate.setDate(excelDate.getDate() + leaveEndValue);
                                leaveEndDate = excelDate;
                            } else if (typeof leaveEndValue === 'string' && leaveEndValue) {
                                const parts = leaveEndValue.split('/');
                                if (parts.length === 3) {
                                    leaveEndDate = new Date(Date.UTC(parseInt(parts[0], 10), parseInt(parts[1], 10) - 1, parseInt(parts[2], 10)));
                                }
                            }

                            let leaveDays = 0;
                            if (leaveStartDate) {
                                const effectiveLeaveEndDate = leaveEndDate ? leaveEndDate : endOfYear;
                                const leaveStartInYear = leaveStartDate < startOfYear ? startOfYear : leaveStartDate;
                                const leaveEndInYear = effectiveLeaveEndDate > endOfYear ? endOfYear : effectiveLeaveEndDate;

                                if (leaveStartInYear <= leaveEndInYear) {
                                    leaveDays = Math.floor((leaveEndInYear.getTime() - leaveStartInYear.getTime()) / (1000 * 60 * 60 * 24)) + 1;
                                }
                            }
                            
                            if (leaveDays >= 180) {
                                appraisalType = 'ä¸äºˆè€ƒç¸¾';
                            } else if (hireDate && !isNaN(hireDate.getTime())) {
                                // ä¿®æ­£é‚è¼¯ï¼šå¾æ­£å¼ä»»è·èµ·ç®—æ—¥æˆ–ç•¶å¹´åº¦é–‹å§‹æ—¥ï¼ˆå–è¼ƒæ™šè€…ï¼‰
                                const probationEndDate = new Date(hireDate.getUTCFullYear(), hireDate.getUTCMonth() + 1, 1);
                                probationEndDate.setUTCMonth(probationEndDate.getUTCMonth() + 6);

                                const actualWorkStart = probationEndDate > startOfYear ? probationEndDate : startOfYear;
                                const actualWorkEnd = endOfYear;
                                const actualWorkDays = Math.floor((actualWorkEnd.getTime() - actualWorkStart.getTime()) / (1000 * 60 * 60 * 24)) + 1 - leaveDays;

                                if (actualWorkDays >= 365) {
                                     appraisalType = 'å¹´è€ƒ';
                                } else if (actualWorkDays >= 180) {
                                     appraisalType = 'å¦è€ƒ';
                                } else {
                                    appraisalType = 'ä¸äºˆè€ƒæ ¸';
                                }
                            }
                            
                            return {
                                "employeeId": row[employeeNumIndex] || '',
                                "name": row[chineseNameIndex] || '',
                                "department": row[departmentIndex] || '',
                                "hireDate": formattedHireDate,
                                "jobTitle": row[jobTitleIndex] || '',
                                "appraisalType": appraisalType
                            };
                        }).filter(item => item !== null);
                        
                        const table = $('#appraisalTable').DataTable();
                        table.clear().rows.add(processedData).draw();
                        
                        $('#upload-status').text('åå–®å·²æˆåŠŸæ›´æ–°ï¼').removeClass('text-danger').addClass('text-success');

                    } catch (error) {
                        console.error('æª”æ¡ˆè™•ç†å¤±æ•—:', error);
                        $('#upload-status').text('æª”æ¡ˆè™•ç†å¤±æ•—ï¼Œè«‹æª¢æŸ¥æª”æ¡ˆæ ¼å¼ï¼').removeClass('text-success').addClass('text-danger');
                    }
                };
                reader.readAsArrayBuffer(file);
            });
        } else {
            $('#employee-view').show();
            renderEmployeeSidebar();
            
            $('#se_9').on('change', function() {
                const input_1 = $('#position_change');
                const input_2 = $('#unit_change');
                if (this.value === '2') {
                    input_1.show();
                    input_2.hide().val('');
                } else if (this.value === '3') {
                    input_2.show();
                    input_1.hide().val('');
                } else {
                    input_1.hide().val('');
                    input_2.hide().val('');
                }
            });
        }

        $('#logout-btn').on('click', function() {
            sessionStorage.removeItem('loggedInUser');
            window.location.href = 'login.html';
        });

        function renderSupervisorSidebar() {
            const sidebarHtml = `
                <div>
                    <a href="#" id="filterAll" class="itemToggle">é¦–é ï¼ˆé¡¯ç¤ºå…¨éƒ¨ï¼‰</a>
                    <a href="#" class="itemToggle">åŒä»å¹´åº¦è€ƒæ ¸<span class="arrow">â–¼</span></a>
                    <div class="submenu"><a href="#" id="filterAnnual">ï¼è€ƒæ ¸è¡¨</a></div>
                    <a href="#" class="itemToggle">åŒä»å¦äºˆè€ƒæ ¸<span class="arrow">â–¼</span></a>
                    <div class="submenu"><a href="#" id="filterSpecial">ï¼è€ƒæ ¸è¡¨</a></div>
                    <a href="#" class="itemToggle">åŒä»è©¦ç”¨æœŸè€ƒæ ¸<span class="arrow">â–¼</span></a>
                    <div class="submenu"><a href="#" id="filterProbation">ï¼è€ƒæ ¸è¡¨</a></div>
                </div>`;
            $('#sidebar').html(sidebarHtml);
            let toggles = document.querySelectorAll(".itemToggle");
            toggles.forEach(function (toggle) {
                let submenu = toggle.nextElementSibling;
                if (submenu && submenu.classList.contains("submenu")) {
                    submenu.style.display = "none";
                }
            });
        }

        function renderEmployeeSidebar() {
            const sidebarHtml = `<div><a href="#">å¡«å¯«è‡ªè©•è¡¨</a><a href="#">æŸ¥çœ‹æˆ‘çš„è€ƒæ ¸ç´€éŒ„</a></div>`;
            $('#sidebar').html(sidebarHtml);
        }

        function initializeSupervisorTable() {
            let table = $('#appraisalTable').DataTable({
                "data": [],
                "columns": [
                    { "data": 'employeeId', "title": "å“¡å·¥å·¥è™Ÿ" },
                    { "data": 'name', "title": "ä¸­æ–‡å§“å" },
                    { "data": 'department', "title": "éƒ¨é–€åç¨±" },
                    { "data": 'jobTitle', "title": "è·å‹™åç¨±" },
                    { "data": 'hireDate', "title": "åˆ°è·æ—¥æœŸ" },
                    { "data": 'appraisalType', "title": "è€ƒæ ¸é¡åˆ¥" },
                    {
                        "data": null, "title": "æ“ä½œ",
                        "render": function(data, type, row) {
                            return `<a href="appraisal_form.html?employeeId=${row.employeeId}" class="btn btn-primary btn-sm">é€²è¡Œè©•æ ¸</a>`;
                        },
                        "orderable": false
                    }
                ],
                "language": { "url": "https://cdn.datatables.net/plug-ins/1.11.5/i18n/zh-HANT.json" }
            });

            $('#filterAll').on('click', function(e) { e.preventDefault(); table.column(5).search('').draw(); });
            $('#filterAnnual').on('click', function(e) { e.preventDefault(); table.column(5).search('å¹´è€ƒ').draw(); });
            $('#filterSpecial').on('click', function(e) { e.preventDefault(); table.column(5).search('å¦è€ƒ').draw(); });
            $('#filterProbation').on('click', function(e) { e.preventDefault(); table.column(5).search('ä¸äºˆè€ƒæ ¸').draw(); });
        }
    });
</script>
</body>
</html>